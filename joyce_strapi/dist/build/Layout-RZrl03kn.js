const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["strapi-DkIoYDWU.js","strapi-D6821bIJ.css"])))=>i.map(i=>d[i]);
import{r as h,a3 as v,cA as _,ak as I,n as T,cB as A,bw as D,_ as C,a as y,b as B,aN as O,bP as U,j as t,cC as d,bl as F,cD as R,k as G,a5 as H,aJ as K,P as w,aO as V,A as W,cE as $}from"./strapi-DkIoYDWU.js";import{s as J}from"./sortBy-MYA2hViQ.js";import{s as q}from"./selectors-3GlUcyyw.js";import"./_baseMap-CqoG5T0c.js";import"./_baseEach-DhMVv6V4.js";const z=i=>i.map(a=>{const o=a.links.map(n=>({...n,isDisplayed:!1}));return{...a,links:o}}),Q=()=>{const[{isLoading:i,menu:a},o]=h.useState({isLoading:!0,menu:[]}),n=v("useSettingsMenu",s=>s.checkUserHasPermissions),u=_("useSettingsMenu",s=>s.shouldUpdateStrapi),m=I("useSettingsMenu",s=>s.settings),g=T(q),N=h.useMemo(()=>A(),[]),{admin:p,global:r}=D(N,async()=>(await C(async()=>{const{SETTINGS_LINKS_EE:s}=await import("./strapi-DkIoYDWU.js").then(e=>e.iW);return{SETTINGS_LINKS_EE:s}},__vite__mapDeps([0,1]))).SETTINGS_LINKS_EE(),{combine(s,e){return{admin:[...e.admin,...s.admin],global:[...s.global,...e.global]}},defaultValue:{admin:[],global:[]}}),l=h.useCallback(s=>{if(!s.id)throw new Error("The settings menu item must have an id attribute.");return{...s,permissions:g.settings?.[s.id]?.main??[]}},[g.settings]);return h.useEffect(()=>{const s=async()=>{const M=await(L=>Promise.all(L.reduce((f,S,k)=>{const x=S.links.map(async(j,b)=>({hasPermission:(await n(j.permissions)).length>0,sectionIndex:k,linkIndex:b}));return[...f,...x]},[])))(P);o(L=>({...L,isLoading:!1,menu:P.map((f,S)=>({...f,links:f.links.map((k,x)=>{const j=M.find(b=>b.sectionIndex===S&&b.linkIndex===x);return{...k,isDisplayed:!!j?.hasPermission}})}))}))},{global:e,...E}=m,P=z([{...e,links:J([...e.links,...r.map(l)],c=>c.id).map(c=>({...c,hasNotification:c.id==="000-application-infos"&&u}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:p.map(l)},...Object.values(E)]);s()},[p,r,m,u,l,n]),{isLoading:i,menu:a.map(s=>({...s,links:s.links.filter(e=>e.isDisplayed)}))}},X=G(H)`
  border-radius: 50%;
  padding: ${({theme:i})=>i.spaces[2]};
  height: 2rem;
`,Y=({menu:i})=>{const{formatMessage:a}=y(),{trackUsage:o}=B(),{pathname:n}=O(),{license:u}=U(),m=u?.features.map(s=>s.name),g={"content-releases":"cms-content-releases","review-workflows":"review-workflows",sso:"sso",auditLogs:"audit-logs","auditLogs-purchase-page":"audit-logs"},p=i.filter(s=>!s.links.every(e=>e.isDisplayed===!1)).map(s=>({...s,title:s.intlLabel,links:s.links.map(e=>({...e,id:e.id,title:e.intlLabel,name:e.id}))})),r=a({id:"global.settings",defaultMessage:"Settings"}),l=s=>()=>{o("willNavigate",{from:n,to:s})};return t.jsxs(d.Main,{"aria-label":r,children:[t.jsx(d.Header,{label:r}),t.jsx(F,{background:"neutral150",marginBottom:5}),t.jsx(d.Sections,{children:p.map(s=>t.jsx(d.Section,{label:a(s.intlLabel),children:s.links.map(e=>t.jsx(d.Link,{to:e.to,onClick:l(e.to),label:a(e.intlLabel),endAction:t.jsxs(t.Fragment,{children:[e?.licenseOnly&&t.jsx(R,{fill:(m||[]).includes(g[e.id])?"primary600":"neutral300",width:"1.5rem",height:"1.5rem"}),e?.hasNotification&&t.jsx(X,{"aria-label":"Notification",backgroundColor:"primary600",textColor:"neutral0",children:"1"})]})},e.id))},s.id))})]})},is=()=>{const i=K("/settings/:settingId/*"),{formatMessage:a}=y(),{isLoading:o,menu:n}=Q();return o?t.jsx(w.Loading,{}):i?.params.settingId?t.jsxs(W.Root,{sideNav:t.jsx(Y,{menu:n}),children:[t.jsx(w.Title,{children:a({id:"global.settings",defaultMessage:"Settings"})}),t.jsx($,{})]}):t.jsx(V,{to:"application-infos"})};export{is as Layout};
